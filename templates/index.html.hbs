<!DOCTYPE html>
<head>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@500&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/zoom-any-js@latest/dist/zoom-any-js.css" rel="stylesheet">
    <script type="module">

        import ZoomAnyJs from "https://cdn.jsdelivr.net/npm/zoom-any-js@latest/dist/zoom-any-js.js"

        const zoom = new ZoomAnyJs()
    </script>

    <script>
        function closePanel() {
            var panel = document.getElementById("panel");
            var button = document.getElementById("closeButton");
            if(panel.classList.contains("hide")) {
                panel.classList.remove("hide")
                button.innerText = "<"
            } else {
                panel.classList.add("hide")
                button.innerText = ">"
            }
        }
    </script>

    <style>

        body {
            background-color: dimgrey;
            height: 100%;
            image-rendering: pixelated;
            font-family: "Lexend", serif;
            font-optical-sizing: auto;
            font-weight: 500;
            font-style: normal;
        }
        #panel {
            position: absolute;
            margin: 30px;
            width: 15%;
            height: 90%;
            background-color: slategray;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition-duration: 600ms;
            z-index: 2000;
        }

        .subPanel {
            display: flex;
            flex-direction: column;
            justify-content: start;
        }

        .flexLine {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            text-align: center;
        }

        #closeButton {
            aspect-ratio: 1 / 1;
            margin: 20px;
        }
        .hide {
            transform: translateX(-90%);
        }

        .pokemonContainer {
            display: flex;
            align-items: end;
            justify-content: center;
            height: 100%;
        }

        datalist {
            display: none;
        }

        .invalid {
            color: #fe5656;
            font-size: 9px;
        }
    </style>
</head>
<html>
<body>
<div id="panel">
    <div class="subPanel">
        <div class="flexLine">
            <div style="margin: 20px"></div>
            <div style="flex-grow: 20">PokéSizes {{height}}</div>
            <button id="closeButton" onclick="closePanel()"><</button>
        </div>
        {{#each mons}}
            <div class="flexLine">
                <span>{{this.name}}</span>
                <form id="{{this.name}}" action="/remove" method="post">
                    <input hidden="hidden" name="mon" value="{{this.name}}" />
                    <input type="submit" value="x">
                </form>
            </div>
        {{/each}}
    </div>
    <div class="inputLine">
        <div>
            {{#if invalid}}
                <div class="invalid">"{{invalid}}" is not a valid Pokémon.</div>
            {{/if}}
            <form id="addMon" action="/add" method="post">
                <label for="mon">Id:</label>
                <input type="text" id="mon" name="mon" placeholder="Enter Here" list="mon_names"/>
                <datalist id="mon_names">
                    {{#each mon_names}}
                        <option value="{{this}}">{{this}}</option>
                    {{/each}}
                </datalist>
                <input type="submit" value="Add">
            </form>
        </div>
        <form id="resetMon" action="/reset" method="post">
            <input type="submit" value="reset List">
        </form>
    </div>
</div>
<div class="pokemonContainer zoomable">
    {{#each mons}}
        <img style="height: {{this.size}}vh" src="{{this.image}}">
    {{/each}}
</div>

</body>
</html>